define("kj/accordion/0.0.1/accordion",["$","gallery/handlebars/1.0.0/handlebars","kj/tree/0.0.1/tree","arale/widget/1.0.2/widget","arale/base/1.0.1/base","arale/class/1.0.0/class","arale/events/1.0.0/events","arale/switchable/0.9.11/switchable","arale/easing/1.0.0/easing"],function(e,t,n){var r=e("$"),i=e("gallery/handlebars/1.0.0/handlebars"),s=e("kj/tree/0.0.1/tree"),o=e("arale/switchable/0.9.11/switchable"),u='{{#each headers}} <div class="accordion-hd unselectable" data-role="trigger"> <i class="icon {{this.icon}}"></i> <span>{{this.name}}</span> <i data-role="flag" class="icon icon-tool icon-tool-expand-bottom"></i> </div> <div class="accordion-bd" data-role="panel"></div> {{/each}}',a=o.extend({attrs:{triggerType:"click",height:0,activeTriggerClass:"accordion-hd-is-active"},setup:function(){var e=this,t=this.get("url");t?r.getJSON(t,function(t){var n=e._createAccordion(t);e.element.html(n),a.superclass.setup.call(e),e.fitToHeight(e.get("height")),e._createSubPanel(t)}):(a.superclass.setup.call(this),this.fitToHeight(this.get("height")))},_createAccordion:function(e){return html=i.compile(u)({headers:e}),html},_createSubPanel:function(e){function n(e,n,r){var i=Array.prototype.slice.call(arguments,0);i.unshift("itemclick"),t.trigger.apply(t,i)}var t=this;for(var r=0;r<e.length;r++){var i=new s({element:this.panels[r],data:e[r]});i.on("click",n)}},_switchTrigger:function(e,t){a.superclass._switchTrigger.apply(this,arguments),this.triggers.eq(t).find("[data-role=flag]").toggleClass("icon-tool-collapse-top icon-tool-expand-bottom"),this.triggers.eq(e).find("[data-role=flag]").toggleClass("icon-tool-collapse-top icon-tool-expand-bottom")},fitToHeight:function(e){e>0&&this.element.height(e);var t=e-this.triggers.outerHeight()*this.triggers.length;this.panels.height(t)}});n.exports=a});